(function(){'use strict';chrome.runtime.onMessage.addListener(function(b){switch(b.cmd){case "g_links":{var f=[],h=/^(((ftp|https?):\/\/)|(data:)).+$/i,c={};function a(d,k,l){if(d&&k)for(var e=0,m=d.length;e<m;++e){var g=d[e][k];h.test(g)&&void 0==c[g]&&(f.push({url:g,desc:d[e].download||"",text:l?d[e][l]||"":"",title:d[e].title||"",referer:""}),c[g]=1)}}a(document.links,"href","text");a(document.images,"src","alt");a(document.getElementsByTagName("audio"),"src");a(document.getElementsByTagName("video"),"src");
a(document.getElementsByTagName("source"),"src");a(document.getElementsByTagName("script"),"src");a(document.getElementsByTagName("link"),"href");0<f.length&&chrome.runtime.sendMessage({cmd:"add_links",data:f})}}});
document.addEventListener("mousedown",function(b){function f(a){for(;a&&a.tagName;){if("a"==a.tagName.toLowerCase())return a;a=a.parentNode}return null}function h(a){for(;a;){if(a.src)return a;a=a.parentNode}return null}if(0<=b.button&&2>=b.button){var c=f(b.target);c&&c.href&&"j"!=c.href[0]&&chrome.runtime.sendMessage({cmd:"url_desc",url:c.href,download:(c.download||"").trim(),text:(c.text||"").trim(),title:(c.title||"").trim()});(b=h(b.target))&&b.src&&chrome.runtime.sendMessage({cmd:"url_desc",
url:b.src,download:(b.download||"").trim(),text:(b.alt||"").trim(),title:(b.title||"").trim()})}},!0);}).call(this);

import{b as e,a as t}from"./runtime-dom.esm-bundler-8f945973.js";import{u as a}from"./index-854ce82e.js";import{b as o,d as n,E as l,_ as s,w as r}from"./index-f72b3ea9.js";import{v as i,h as u,e as p}from"./index-4f6840b9.js";import{c as d,b as c}from"./style-ac750348.js";import{r as f,d as v,a2 as m,a9 as y,a as x,u as b,N as g,t as h,n as w,g as S}from"./reactivity.esm-bundler-72867dac.js";import{b as k,u as z,d as j}from"./index-62715ce7.js";import{i as C,V as I}from"./icon-b1cf815e.js";import{m as E}from"./typescript-5028724d.js";import{U as $,i as F}from"./focus-trap-a7ebc7ce.js";import{u as P}from"./index-de1201fd.js";import{u as V,a as B}from"./index-2e34e30b.js";import{u as M}from"./index-08eda97d.js";import{d as _}from"./error-c58402b8.js";import{q as N,ar as A,at as R,c as H,w as O,v as T,t as W,g as K,o as L,a as q,e as D,F as U,x as G,b as J,h as Q,l as X,r as Y,a6 as Z,f as ee}from"./runtime-core.esm-bundler-77b13fca.js";const te=e=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(e);let ae;const oe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function ne(e,t=1,a){var o;ae||(ae=document.createElement("textarea"),document.body.appendChild(ae));const{paddingSize:n,borderSize:l,boxSizing:s,contextStyle:r}=function(e){const t=window.getComputedStyle(e),a=t.getPropertyValue("box-sizing"),o=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),n=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:oe.map((e=>`${e}:${t.getPropertyValue(e)}`)).join(";"),paddingSize:o,borderSize:n,boxSizing:a}}(e);ae.setAttribute("style",`${r};\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n`),ae.value=e.value||e.placeholder||"";let i=ae.scrollHeight;const u={};"border-box"===s?i+=l:"content-box"===s&&(i-=n),ae.value="";const p=ae.scrollHeight-n;if(d(t)){let e=p*t;"border-box"===s&&(e=e+n+l),i=Math.max(e,i),u.minHeight=`${e}px`}if(d(a)){let e=p*a;"border-box"===s&&(e=e+n+l),i=Math.min(e,i)}return u.height=`${i}px`,null==(o=ae.parentNode)||o.removeChild(ae),ae=void 0,u}const le=o({id:{type:String,default:void 0},size:k,disabled:Boolean,modelValue:{type:n([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:n([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:C},prefixIcon:{type:C},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:n([Object,Array,String]),default:()=>E({})}}),se={[$]:e=>v(e),input:e=>v(e),change:e=>v(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},re=["role"],ie=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],ue=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],pe=N({name:"ElInput",inheritAttrs:!1});const de=r(s(N({...pe,props:le,emits:se,setup(o,{expose:n,emit:s}){const r=o,d=A(),v=R(),k=H((()=>{const e={};return"combobox"===r.containerRole&&(e["aria-haspopup"]=d["aria-haspopup"],e["aria-owns"]=d["aria-owns"],e["aria-expanded"]=d["aria-expanded"]),e})),C=H((()=>["textarea"===r.type?ce.b():de.b(),de.m(se.value),de.is("disabled",pe.value),de.is("exceed",Be.value),{[de.b("group")]:v.prepend||v.append,[de.bm("group","append")]:v.append,[de.bm("group","prepend")]:v.prepend,[de.m("prefix")]:v.prefix||r.prefixIcon,[de.m("suffix")]:v.suffix||r.suffixIcon||r.clearable||r.showPassword,[de.bm("suffix","password-clear")]:$e.value&&Fe.value},d.class])),E=H((()=>[de.e("wrapper"),de.is("focus",me.value)])),N=P({excludeKeys:H((()=>Object.keys(k.value)))}),{form:ae,formItem:oe}=V(),{inputId:le}=B(r,{formItemContext:oe}),se=z(),pe=j(),de=M("input"),ce=M("textarea"),fe=m(),ve=m(),me=f(!1),ye=f(!1),xe=f(!1),be=f(!1),ge=f(),he=m(r.inputStyle),we=H((()=>fe.value||ve.value)),Se=H((()=>{var e;return null!=(e=null==ae?void 0:ae.statusIcon)&&e})),ke=H((()=>(null==oe?void 0:oe.validateState)||"")),ze=H((()=>ke.value&&I[ke.value])),je=H((()=>be.value?i:u)),Ce=H((()=>[d.style,r.inputStyle])),Ie=H((()=>[r.inputStyle,he.value,{resize:r.resize}])),Ee=H((()=>F(r.modelValue)?"":String(r.modelValue))),$e=H((()=>r.clearable&&!pe.value&&!r.readonly&&!!Ee.value&&(me.value||ye.value))),Fe=H((()=>r.showPassword&&!pe.value&&!r.readonly&&!!Ee.value&&(!!Ee.value||me.value))),Pe=H((()=>r.showWordLimit&&!!N.value.maxlength&&("text"===r.type||"textarea"===r.type)&&!pe.value&&!r.readonly&&!r.showPassword)),Ve=H((()=>Array.from(Ee.value).length)),Be=H((()=>!!Pe.value&&Ve.value>Number(N.value.maxlength))),Me=H((()=>!!v.suffix||!!r.suffixIcon||$e.value||r.showPassword||Pe.value||!!ke.value&&Se.value)),[_e,Ne]=function(e){const t=f();return[function(){if(null==e.value)return;const{selectionStart:a,selectionEnd:o,value:n}=e.value;if(null==a||null==o)return;const l=n.slice(0,Math.max(0,a)),s=n.slice(Math.max(0,o));t.value={selectionStart:a,selectionEnd:o,value:n,beforeTxt:l,afterTxt:s}},function(){if(null==e.value||null==t.value)return;const{value:a}=e.value,{beforeTxt:o,afterTxt:n,selectionStart:l}=t.value;if(null==o||null==n||null==l)return;let s=a.length;if(a.endsWith(n))s=a.length-n.length;else if(a.startsWith(o))s=o.length;else{const e=o[l-1],t=a.indexOf(e,l-1);-1!==t&&(s=t+1)}e.value.setSelectionRange(s,s)}]}(fe);a(ve,(e=>{if(!Pe.value||"both"!==r.resize)return;const t=e[0],{width:a}=t.contentRect;ge.value={right:`calc(100% - ${a+15+6}px)`}}));const Ae=()=>{const{type:e,autosize:t}=r;if(c&&"textarea"===e)if(t){const e=S(t)?t.minRows:void 0,a=S(t)?t.maxRows:void 0;he.value={...ne(ve.value,e,a)}}else he.value={minHeight:ne(ve.value).minHeight}},Re=()=>{const e=we.value;e&&e.value!==Ee.value&&(e.value=Ee.value)},He=async e=>{_e();let{value:t}=e.target;r.formatter&&(t=r.parser?r.parser(t):t,t=r.formatter(t)),xe.value||(t!==Ee.value?(s($,t),s("input",t),await T(),Re(),Ne()):Re())},Oe=e=>{s("change",e.target.value)},Te=e=>{s("compositionstart",e),xe.value=!0},We=e=>{var t;s("compositionupdate",e);const a=null==(t=e.target)?void 0:t.value,o=a[a.length-1]||"";xe.value=!te(o)},Ke=e=>{s("compositionend",e),xe.value&&(xe.value=!1,He(e))},Le=()=>{be.value=!be.value,qe()},qe=async()=>{var e;await T(),null==(e=we.value)||e.focus()},De=e=>{me.value=!0,s("focus",e)},Ue=e=>{var t;me.value=!1,s("blur",e),r.validateEvent&&(null==(t=null==oe?void 0:oe.validate)||t.call(oe,"blur").catch((e=>_())))},Ge=e=>{ye.value=!1,s("mouseleave",e)},Je=e=>{ye.value=!0,s("mouseenter",e)},Qe=e=>{s("keydown",e)},Xe=()=>{s($,""),s("change",""),s("clear"),s("input","")};return O((()=>r.modelValue),(()=>{var e;T((()=>Ae())),r.validateEvent&&(null==(e=null==oe?void 0:oe.validate)||e.call(oe,"change").catch((e=>_())))})),O(Ee,(()=>Re())),O((()=>r.type),(async()=>{await T(),Re(),Ae()})),W((()=>{!r.formatter&&r.parser,Re(),T(Ae)})),n({input:fe,textarea:ve,ref:we,textareaStyle:Ie,autosize:y(r,"autosize"),focus:qe,blur:()=>{var e;return null==(e=we.value)?void 0:e.blur()},select:()=>{var e;null==(e=we.value)||e.select()},clear:Xe,resizeTextarea:Ae}),(a,o)=>K((L(),q("div",Z(b(k),{class:b(C),style:b(Ce),role:a.containerRole,onMouseenter:Je,onMouseleave:Ge}),[D(" input "),"textarea"!==a.type?(L(),q(U,{key:0},[D(" prepend slot "),a.$slots.prepend?(L(),q("div",{key:0,class:x(b(de).be("group","prepend"))},[G(a.$slots,"prepend")],2)):D("v-if",!0),J("div",{class:x(b(E))},[D(" prefix slot "),a.$slots.prefix||a.prefixIcon?(L(),q("span",{key:0,class:x(b(de).e("prefix"))},[J("span",{class:x(b(de).e("prefix-inner")),onClick:qe},[G(a.$slots,"prefix"),a.prefixIcon?(L(),Q(b(l),{key:0,class:x(b(de).e("icon"))},{default:X((()=>[(L(),Q(Y(a.prefixIcon)))])),_:1},8,["class"])):D("v-if",!0)],2)],2)):D("v-if",!0),J("input",Z({id:b(le),ref_key:"input",ref:fe,class:b(de).e("inner")},b(N),{type:a.showPassword?be.value?"text":"password":a.type,disabled:b(pe),formatter:a.formatter,parser:a.parser,readonly:a.readonly,autocomplete:a.autocomplete,tabindex:a.tabindex,"aria-label":a.label,placeholder:a.placeholder,style:a.inputStyle,form:r.form,onCompositionstart:Te,onCompositionupdate:We,onCompositionend:Ke,onInput:He,onFocus:De,onBlur:Ue,onChange:Oe,onKeydown:Qe}),null,16,ie),D(" suffix slot "),b(Me)?(L(),q("span",{key:1,class:x(b(de).e("suffix"))},[J("span",{class:x(b(de).e("suffix-inner")),onClick:qe},[b($e)&&b(Fe)&&b(Pe)?D("v-if",!0):(L(),q(U,{key:0},[G(a.$slots,"suffix"),a.suffixIcon?(L(),Q(b(l),{key:0,class:x(b(de).e("icon"))},{default:X((()=>[(L(),Q(Y(a.suffixIcon)))])),_:1},8,["class"])):D("v-if",!0)],64)),b($e)?(L(),Q(b(l),{key:1,class:x([b(de).e("icon"),b(de).e("clear")]),onMousedown:t(b(g),["prevent"]),onClick:Xe},{default:X((()=>[ee(b(p))])),_:1},8,["class","onMousedown"])):D("v-if",!0),b(Fe)?(L(),Q(b(l),{key:2,class:x([b(de).e("icon"),b(de).e("password")]),onClick:Le},{default:X((()=>[(L(),Q(Y(b(je))))])),_:1},8,["class"])):D("v-if",!0),b(Pe)?(L(),q("span",{key:3,class:x(b(de).e("count"))},[J("span",{class:x(b(de).e("count-inner"))},h(b(Ve))+" / "+h(b(N).maxlength),3)],2)):D("v-if",!0),b(ke)&&b(ze)&&b(Se)?(L(),Q(b(l),{key:4,class:x([b(de).e("icon"),b(de).e("validateIcon"),b(de).is("loading","validating"===b(ke))])},{default:X((()=>[(L(),Q(Y(b(ze))))])),_:1},8,["class"])):D("v-if",!0)],2)],2)):D("v-if",!0)],2),D(" append slot "),a.$slots.append?(L(),q("div",{key:1,class:x(b(de).be("group","append"))},[G(a.$slots,"append")],2)):D("v-if",!0)],64)):(L(),q(U,{key:1},[D(" textarea "),J("textarea",Z({id:b(le),ref_key:"textarea",ref:ve,class:b(ce).e("inner")},b(N),{tabindex:a.tabindex,disabled:b(pe),readonly:a.readonly,autocomplete:a.autocomplete,style:b(Ie),"aria-label":a.label,placeholder:a.placeholder,form:r.form,onCompositionstart:Te,onCompositionupdate:We,onCompositionend:Ke,onInput:He,onFocus:De,onBlur:Ue,onChange:Oe,onKeydown:Qe}),null,16,ue),b(Pe)?(L(),q("span",{key:0,style:w(ge.value),class:x(b(de).e("count"))},h(b(Ve))+" / "+h(b(N).maxlength),7)):D("v-if",!0)],64))],16,re)),[[e,"hidden"!==a.type]])}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]));export{de as E,te as i};

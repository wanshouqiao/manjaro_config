import{_ as t}from"./preload-helper-706a0e5c.js";import{a as e,T as s,b as i}from"./runtime-dom.esm-bundler-8f945973.js";import{D as o}from"./d-icon-6d190a6a.js";import{_ as a}from"./d-dialog-563b2957.js";import{uniqBy as l}from"./utils-73d66301.js";import{u as r}from"./globStorageState-d3feed6a.js";/* empty css             *//* empty css                   */import{E as n}from"./el-skeleton-item-3488c43b.js";/* empty css                *//* empty css                 */import{getTopListApi as m,getTopCategoryApi as p}from"./topsearch-fab9b241.js";import{D as c}from"./vuedraggable.umd-15a97714.js";import{_ as d}from"./_plugin-vue_export-helper-1b428a4d.js";import{E as j,a as u}from"./index-f8eeafa4.js";import{E as y}from"./index-e52000c7.js";import{q as f,o as h,h as g,f as b,a as x,b as v,c as w,w as _,K as k,l as C,F as D,m as T,j as I,g as z}from"./runtime-core.esm-bundler-77b13fca.js";import{e as E}from"./main-f5b07798.js";import{S}from"./Select-b8d931fc.js";import{ElMessage as L}from"./index-da9a90a7.js";import{b as V,u as A,a as B,t as W}from"./reactivity.esm-bundler-72867dac.js";import"./el-dialog-9345927c.js";import"./index-f72b3ea9.js";import"./index-08eda97d.js";import"./_MapCache-31dad113.js";import"./isSymbol-1e3d4c76.js";import"./style-ac750348.js";import"./icon-b1cf815e.js";import"./index-4f6840b9.js";import"./index-11ecaac6.js";import"./focus-trap-a7ebc7ce.js";import"./aria-60e0cdc6.js";import"./index-e1484003.js";import"./index-9f7efeb4.js";import"./error-c58402b8.js";import"./scroll-f7c38f71.js";/* empty css                   *//* empty css                                                 */import"./Close-20719dd3.js";import"./index-ea316b3a.js";import"./local-82fd2aea.js";import"./baseRequest-a74f719c.js";import"./axios-a986ab8c.js";import"./version-62e2ec50.js";import"./dayjs.min-39fed9c4.js";import"./_commonjsHelpers-e5557959.js";import"./vue.runtime.esm-bundler-07884c49.js";import"./sortable.esm-ca16c14a.js";import"./index-854ce82e.js";import"./typescript-5028724d.js";import"./strings-23817cc8.js";import"./index-6639a375.js";import"./index-62715ce7.js";import"./index-de1201fd.js";import"./index-2e34e30b.js";import"./d-text-icon-0c972c3a.js";import"./_baseClone-93129bef.js";import"./browser-c7a4f02b.js";import"./week-7975c4f4.js";import"./global-3c385e89.js";import"./Plus-9ce421bd.js";import"./Check-63155ac6.js";import"./icon-a5a7f81d.js";import"./icon-fdb117a5.js";import"./d-calendar-9992ce38.js";import"./icon-92d26b08.js";import"./dateTime-73945ad3.js";import"./icon-0ad693e8.js";import"./dateTools-6203f8f7.js";import"./icon-e7ca50f5.js";import"./icon2-d4bc0c65.js";import"./icon3-aa79709d.js";import"./icon-73c56842.js";import"./icon-9c80e3eb.js";import"./icon-c3851054.js";import"./icon-8d5583fa.js";import"./icon-cc372385.js";import"./icon-c1c85589.js";import"./icon-5996535b.js";import"./icon-c531cb5b.js";import"./icon-e1d7edae.js";import"./notes-a9d23bdb.js";import"./icon-2b215e9e.js";import"./icon-eca13f38.js";import"./icon-51af1d1d.js";import"./stocks-0eb3a6ed.js";import"./icon-133d69b9.js";import"./icon-dd45f250.js";import"./icon-d391b03b.js";import"./todo-998e5e96.js";import"./icon-60032c73.js";import"./icon-a65bc46c.js";import"./icon-0ba8aff4.js";import"./icon-6322d102.js";import"./icon-1216e893.js";import"./icon-4fbf9766.js";/* empty css                  */import"./icon-3f2dfd1c.js";import"./icon-449c1bca.js";import"./icon-7d2de9c9.js";import"./config-provider-6b9f90d0.js";var F=f({name:"InfoFilled"});const M={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},q=b("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64zm67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344zM590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"},null,-1);F.render=function(t,e,s,i,o,a){return h(),g("svg",M,[q])},F.__file="packages/components/InfoFilled.vue";const O=F,G={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},H=[v("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2s.9-2 2-2s2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2s2-.9 2-2s-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2s2-.9 2-2s-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2s-2 .9-2 2s.9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2s2-.9 2-2s-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2s2-.9 2-2s-.9-2-2-2z",fill:"currentColor"},null,-1)],K=f({name:"DragIndicatorOutlined",render:function(t,e){return h(),x("svg",G,H)}}),P={class:"topsearch-content hfull"},R={class:"d-flex-center",style:{height:"30px","flex-flow":"row"}},U={class:"pl20 pr20"},$={class:"d-layout hfull",style:{height:"calc(100% - 86px)","border-top":"1px solid rgba(var(--alpha-color), 0.04)"}},N={class:"d-layout-aside topsearch-aside",style:{width:"21%","min-width":"110px"}},Z=["onClick"],J={title:"拖动",class:"d-icon f20 mr5 handle"},Q=["title"],X=["src"],Y=["onClick"],tt=["title"],et=["src"],st={class:"d-layout-content mt10 d-auto-y ml20",style:""},it={class:"category-title d-flex-y"},ot=["src"],at={class:"d-cell"},lt={class:"topsearch-body"},rt=["href"],nt={class:"item-index mr10"},mt=["title"],pt={class:"f12 ml20 d-sub"},ct={name:"appTopsearch"},dt=d(Object.assign(ct,{setup(d){const f=r(),F=V({keyWord:"",category:"我的订阅",hotType:[],hostList:[],typeId:"",loading:!1,rowData:{},subscribeData:[]}),M=w((()=>[{category:"我的订阅"},{category:"全部"},...l(F.hotType,"category")]));function q(){F.subscribeData.map((t=>({id:t.id,name:t.name}))).forEach(((t,e)=>{f.value.topSearch.splice(e,1,t)}))}const G=(t,e)=>{let s="取消订阅";if("add"==e){if(f.value.topSearch.length>4)return void L.error("最多只能选择5条");f.value.topSearch.push({name:t.name,id:t.id}),s="订阅成功"}else{if(f.value.topSearch.length<2)return void L.error("至少选择1条");let e=f.value.topSearch.findIndex((e=>e.id===t.id));f.value.topSearch.splice(e,1)}L.success(s),dt()},H=w((()=>f.value.topSearch.map((t=>t.id)))),ct=w((()=>F.keyWord?(F.category="全部",F.hotType.filter((t=>t.name.includes(F.keyWord)))):"全部"!=F.category?F.hotType.filter((t=>t.category==F.category)):F.hotType));_((()=>ct.value),(t=>{t.length&&(F.typeId=t[0].id,F.rowData=t[0],jt())}));function dt(){F.subscribeData=H.value.reduce(((t,e)=>[...t,F.hotType.find((t=>t.id==e))||{}]),[]),"我的订阅"==F.category&&ut(F.subscribeData[0])}async function jt(){F.loading=!0;let e=`searchTopList_${F.typeId}`,s=await t((()=>import("./indexdb-76ab5eed.js")),["./indexdb-76ab5eed.js","./localforage-5beca937.js","./_commonjsHelpers-e5557959.js","./_commonjs-dynamic-modules-3e972b61.js","./dayjs.min-39fed9c4.js"],import.meta.url);s=s.default;let i=await s.getItem(e);F.hostList=i.data||[],F.loading=!1,i.isExp&&m({id:F.typeId}).then((t=>{let i=t.data||[];i.length&&s.set(e,i,6e5),F.hostList=i})).finally((()=>{F.loading=!1}))}function ut(t){F.rowData=t,F.typeId=t.id,jt()}return(async()=>{let e=await t((()=>import("./indexdb-76ab5eed.js")),["./indexdb-76ab5eed.js","./localforage-5beca937.js","./_commonjsHelpers-e5557959.js","./_commonjs-dynamic-modules-3e972b61.js","./dayjs.min-39fed9c4.js"],import.meta.url);e=e.default;let s=await e.getItem("searchTopCategory");F.hotType=s.data||[],dt(),s.isExp&&p().then((t=>{let s=t.data||[];F.hotType=s,s.length&&(e.set("searchTopCategory",s,5184e5),dt())}))})(),(t,l)=>{const r=k("el-icon");return h(),g(a,{height:"600px"},{default:C((()=>[v("div",P,[v("p",R,[b(o,{icon:"icon-hotsearch ",size:"80"})]),v("div",U,[b(A(j),{onTabClick:l[0]||(l[0]=t=>F.keyWord=""),modelValue:F.category,"onUpdate:modelValue":l[1]||(l[1]=t=>F.category=t)},{default:C((()=>[(h(!0),x(D,null,T(A(M),(t=>(h(),g(A(u),{label:t.category,name:t.category,key:t.key},null,8,["label","name"])))),128))])),_:1},8,["modelValue"])]),v("div",$,[v("div",N,[b(A(y),{modelValue:F.keyWord,"onUpdate:modelValue":l[2]||(l[2]=t=>F.keyWord=t),style:{margin:"5px",width:"90%"},size:"small",placeholder:"搜索",clearable:""},null,8,["modelValue"]),"我的订阅"==F.category?(h(),g(A(c),{key:0,class:"d-left-tabs","component-data":{tag:"ul",name:"flip-list"},list:F.subscribeData,animation:"300",group:"icon-list","item-key":"id",onEnd:q},{item:C((({element:t})=>[v("li",{class:B(["d-left-tabs-item d-flex-between subscribe-item",{active:F.typeId==t.id}]),onClick:e=>ut(t),style:{transition:"none"}},[v("i",J,[b(A(K))]),v("span",{title:t.name,class:"d-elip",style:{width:"102%"}},[v("img",{class:"icon",src:t.icon,alt:""},null,8,X),I(" "+W(t.name),1)],8,Q),b(r,{title:"订阅在小组件上显示",class:"tabs-item-select"},{default:C((()=>[b(A(E),{onClick:e((e=>G(t,"del")),["stop"])},null,8,["onClick"])])),_:2},1024)],10,Z)])),_:1},8,["list"])):(h(),g(s,{key:1,name:"flip-list",tag:"ul",class:"d-left-tabs"},{default:C((()=>[(h(!0),x(D,null,T(A(ct),(t=>(h(),x("li",{class:B(["d-left-tabs-item d-flex-between",{active:F.typeId==t.id}]),onClick:e=>ut(t),key:t.id},[v("span",{title:t.name,class:"d-elip",style:{width:"102%"}},[v("img",{class:"icon",src:t.icon,alt:""},null,8,et),I(" "+W(t.name),1)],8,tt),z(b(r,{title:"订阅在小组件上显示",class:"tabs-item-select"},{default:C((()=>[A(H).includes(t.id)?(h(),g(A(E),{key:1,onClick:e((e=>G(t,"del")),["stop"])},null,8,["onClick"])):(h(),g(A(S),{key:0,onClick:e((e=>G(t,"add")),["stop"])},null,8,["onClick"]))])),_:2},1536),[[i,A(H).includes(t.id)]])],10,Y)))),128))])),_:1}))]),v("div",st,[v("h2",it,[v("img",{src:F.rowData.icon,alt:""},null,8,ot),v("span",at,W(F.rowData.name)+" ‧ "+W(F.rowData.type),1),b(r,{class:"mr20 d-sub",size:"16",title:"本热搜榜单所陈列的热点信息采集自于互联网，我们不对数据源做任何处理，服务器也不会存储任何数据, 链接均跳转至原始网页地址访问. 如果侵犯您的权益,请与我联系,我会尽快处理。同时请大家自行甄别信息真伪,原始网站信息不代表本人及本产品观点.谢谢大家支持."},{default:C((()=>[b(A(O))])),_:1})]),v("ul",lt,[b(A(n),{loading:F.loading,rows:3,count:1,animated:""},{default:C((()=>[(h(!0),x(D,null,T(F.hostList,((t,e)=>(h(),x("a",{class:"topsearch-item d-flex-y",href:t.link,key:e,target:"_blank"},[v("span",nt,W(t.index),1),v("span",{class:"d-felx d-cell d-elip",title:t.title},W(t.title),9,mt),v("em",pt,W(t.hotValue),1)],8,rt)))),128))])),_:1},8,["loading"])])])])])])),_:1})}}}),[["__scopeId","data-v-a22ab433"]]);export{dt as default};

import{b as e,a as t,d as o,r as s}from"./runtime-dom.esm-bundler-8f945973.js";import{b as n}from"./index-854ce82e.js";import{b as a,d as i,E as l,_ as r,e as u}from"./index-f72b3ea9.js";import{i as p,T as c,C as f}from"./icon-b1cf815e.js";import{u as d}from"./index-08eda97d.js";import{E as m}from"./aria-60e0cdc6.js";import{q as y,c as v,t as g,o as b,h,l as x,g as C,b as k,r as j,e as S,x as _,a as T,F as E,f as I,a4 as L}from"./runtime-core.esm-bundler-77b13fca.js";import{r as M,a as H,u as w,n as z,t as B,d as N}from"./reactivity.esm-bundler-72867dac.js";import{u as $,b as q,l as F}from"./style-ac750348.js";import{u as A}from"./index-e1484003.js";import"./index-4f6840b9.js";import"./_MapCache-31dad113.js";import"./isSymbol-1e3d4c76.js";const O=["success","info","warning","error"],U=a({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:p},id:{type:String,default:""},message:{type:i([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:i(Function),default:()=>{}},onClose:{type:i(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...O,""],default:""},zIndex:{type:Number,default:0}}),W={destroy:()=>!0},D=["id"],Z=["textContent"],G={key:0},J=["innerHTML"],K=y({name:"ElNotification"});var P=r(y({...K,props:U,emits:W,setup(s,{expose:a}){const i=s,r=d("notification"),{Close:u}=f,p=M(!1);let y;const L=v((()=>{const e=i.type;return e&&c[i.type]?r.m(e):""})),N=v((()=>i.type&&c[i.type]||i.icon)),q=v((()=>i.position.endsWith("right")?"right":"left")),F=v((()=>i.position.startsWith("top")?"top":"bottom")),A=v((()=>({[F.value]:`${i.offset}px`,zIndex:i.zIndex})));function O(){i.duration>0&&({stop:y}=$((()=>{p.value&&W()}),i.duration))}function U(){null==y||y()}function W(){p.value=!1}return g((()=>{O(),p.value=!0})),n(document,"keydown",(function({code:e}){e===m.delete||e===m.backspace?U():e===m.esc?p.value&&W():O()})),a({visible:p,close:W}),(s,n)=>(b(),h(o,{name:w(r).b("fade"),onBeforeLeave:s.onClose,onAfterLeave:n[1]||(n[1]=e=>s.$emit("destroy")),persisted:""},{default:x((()=>[C(k("div",{id:s.id,class:H([w(r).b(),s.customClass,w(q)]),style:z(w(A)),role:"alert",onMouseenter:U,onMouseleave:O,onClick:n[0]||(n[0]=(...e)=>s.onClick&&s.onClick(...e))},[w(N)?(b(),h(w(l),{key:0,class:H([w(r).e("icon"),w(L)])},{default:x((()=>[(b(),h(j(w(N))))])),_:1},8,["class"])):S("v-if",!0),k("div",{class:H(w(r).e("group"))},[k("h2",{class:H(w(r).e("title")),textContent:B(s.title)},null,10,Z),C(k("div",{class:H(w(r).e("content")),style:z(s.title?void 0:{margin:0})},[_(s.$slots,"default",{},(()=>[s.dangerouslyUseHTMLString?(b(),T(E,{key:1},[S(" Caution here, message could've been compromised, never use user's input as message "),k("p",{innerHTML:s.message},null,8,J)],2112)):(b(),T("p",G,B(s.message),1))]))],6),[[e,s.message]]),s.showClose?(b(),h(w(l),{key:0,class:H(w(r).e("closeBtn")),onClick:t(W,["stop"])},{default:x((()=>[I(w(u))])),_:1},8,["class","onClick"])):S("v-if",!0)],2)],46,D),[[e,p.value]])])),_:3},8,["name","onBeforeLeave"]))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/notification/src/notification.vue"]]);const Q={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]};let R=1;const V=function(e={},t=null){if(!q)return{close:()=>{}};("string"==typeof e||L(e))&&(e={message:e});const o=e.position||"top-right";let n=e.offset||0;Q[o].forEach((({vm:e})=>{var t;n+=((null==(t=e.el)?void 0:t.offsetHeight)||0)+16})),n+=16;const{nextZIndex:a}=A(),i="notification_"+R++,l=e.onClose,r={...e,zIndex:a(),offset:n,id:i,onClose:()=>{!function(e,t,o){const s=Q[t],n=s.findIndex((({vm:t})=>{var o;return(null==(o=t.component)?void 0:o.props.id)===e}));if(-1===n)return;const{vm:a}=s[n];if(!a)return;null==o||o(a);const i=a.el.offsetHeight,l=t.split("-")[0];s.splice(n,1);const r=s.length;if(r<1)return;for(let u=n;u<r;u++){const{el:e,component:t}=s[u].vm,o=Number.parseInt(e.style[l],10)-i-16;t.props.offset=o}}(i,o,l)}};let u=document.body;F(e.appendTo)?u=e.appendTo:N(e.appendTo)&&(u=document.querySelector(e.appendTo)),F(u)||(u=document.body);const p=document.createElement("div"),c=I(P,r,L(r.message)?{default:()=>r.message}:null);return c.appContext=null!=t?t:V._context,c.props.onDestroy=()=>{s(null,p)},s(c,p),Q[o].push({vm:c}),u.appendChild(p.firstElementChild),{close:()=>{c.component.exposed.visible.value=!1}}};O.forEach((e=>{V[e]=(t={})=>(("string"==typeof t||L(t))&&(t={message:t}),V({...t,type:e}))})),V.closeAll=function(){for(const e of Object.values(Q))e.forEach((({vm:e})=>{e.component.exposed.visible.value=!1}))},V._context=null;const X=u(V,"$notify");export{X as ElNotification,X as default,W as notificationEmits,U as notificationProps,O as notificationTypes};

import{_ as e}from"./preload-helper-706a0e5c.js";import{a as s,b as i}from"./runtime-dom.esm-bundler-8f945973.js";import{l as t}from"./local-82fd2aea.js";import{u as o,o as a,$ as r,b as n,d as l}from"./main-f5b07798.js";import{u as c}from"./globStorageState-d3feed6a.js";import{isBrowser as u,browserName as m,isTouch as p}from"./browser-c7a4f02b.js";import{gridsumAnalytics as d,googleAnalytics as h}from"./statistics-990a4aea.js";import{useStatisticsApi as j}from"./useSta-db699a43.js";import{a as k}from"./axios-a986ab8c.js";import{_ as y}from"./_plugin-vue_export-helper-1b428a4d.js";import{d as _,c as f,t as g,w as v,u as w,o as b,a as x,b as I,F as E,m as S,f as V,e as A,j as R,l as C,g as T,h as P,p as L,i as q}from"./runtime-core.esm-bundler-77b13fca.js";import{b as B,r as D,a as O,u as H,t as $,n as K}from"./reactivity.esm-bundler-72867dac.js";import"./d-text-icon-0c972c3a.js";import"./_baseClone-93129bef.js";import"./_MapCache-31dad113.js";import"./dayjs.min-39fed9c4.js";import"./_commonjsHelpers-e5557959.js";import"./week-7975c4f4.js";import"./vue.runtime.esm-bundler-07884c49.js";import"./utils-73d66301.js";import"./global-3c385e89.js";import"./Plus-9ce421bd.js";import"./Check-63155ac6.js";import"./icon-a5a7f81d.js";import"./icon-fdb117a5.js";import"./d-calendar-9992ce38.js";import"./icon-92d26b08.js";import"./dateTime-73945ad3.js";import"./icon-0ad693e8.js";import"./dateTools-6203f8f7.js";import"./icon-e7ca50f5.js";import"./icon2-d4bc0c65.js";import"./icon3-aa79709d.js";import"./icon-73c56842.js";import"./icon-9c80e3eb.js";import"./icon-c3851054.js";import"./icon-8d5583fa.js";import"./icon-cc372385.js";import"./icon-c1c85589.js";import"./icon-5996535b.js";import"./icon-c531cb5b.js";import"./icon-e1d7edae.js";import"./notes-a9d23bdb.js";import"./index-ea316b3a.js";import"./icon-2b215e9e.js";import"./icon-eca13f38.js";import"./icon-51af1d1d.js";import"./stocks-0eb3a6ed.js";import"./icon-133d69b9.js";import"./icon-dd45f250.js";import"./icon-d391b03b.js";import"./todo-998e5e96.js";import"./icon-60032c73.js";import"./icon-a65bc46c.js";import"./icon-0ba8aff4.js";import"./icon-6322d102.js";import"./icon-1216e893.js";import"./icon-4fbf9766.js";/* empty css             *//* empty css                 *//* empty css                  */import"./icon-3f2dfd1c.js";import"./icon-449c1bca.js";import"./icon-7d2de9c9.js";import"./baseRequest-a74f719c.js";import"./version-62e2ec50.js";const W=e=>(L("data-v-ca352a74"),e=e(),q(),e),z={class:"se-list-keyword"},U=["onClick","title"],F=["onClick"],G=["src"],M={class:"d-elip se-item-title"},J={class:"se-item-icon",style:{color:"var(--primary-color)"}},N={class:"f18 d-icon",size:18},Q=W((()=>I("p",{class:"d-elip se-item-title"},"添加",-1))),X={key:0,class:"req-baidu-per"},Y=W((()=>I("span",{class:"f13 d-block"},"授权开启联想搜索，搜索时将显示联想词。iTab不会获取您的任何数据，建议您授权",-1))),Z={class:"se-keyword-icon d-icon f16"},ee=["onClick","data-index"],se={class:"se-keyword-icon d-icon f16",size:16},ie={class:"d-cell d-elip"},te=["onClick"],oe={name:"HomeSearchSuggest"},ae=y(Object.assign(oe,{props:{currSearch:{type:Object,default:{}}},emits:["selectSearch","selectSug"],setup(y,{expose:L,emit:q}){const W=y,oe=_((()=>e((()=>import("./Close-20719dd3.js")),["./Close-20719dd3.js","./runtime-core.esm-bundler-77b13fca.js","./reactivity.esm-bundler-72867dac.js"],import.meta.url))),ae=_((()=>e((()=>import("./Plus-9ce421bd.js")),["./Plus-9ce421bd.js","./runtime-core.esm-bundler-77b13fca.js","./reactivity.esm-bundler-72867dac.js"],import.meta.url))),re=_((()=>e((()=>import("./AccessTimeRound-0890fd83.js").then((e=>e.A))),["./AccessTimeRound-0890fd83.js","./vue.runtime.esm-bundler-07884c49.js","./_commonjsHelpers-e5557959.js","./runtime-dom.esm-bundler-8f945973.js","./runtime-core.esm-bundler-77b13fca.js","./reactivity.esm-bundler-72867dac.js"],import.meta.url))),ne=_((()=>e((()=>import("./TranslateRound-1f9e0d70.js").then((e=>e.T))),["./TranslateRound-1f9e0d70.js","./vue.runtime.esm-bundler-07884c49.js","./_commonjsHelpers-e5557959.js","./runtime-dom.esm-bundler-8f945973.js","./runtime-core.esm-bundler-77b13fca.js","./reactivity.esm-bundler-72867dac.js"],import.meta.url))),le=_((()=>e((()=>import("./index-40ae5b07.js")),["./index-40ae5b07.js","./index-f72b3ea9.js","./reactivity.esm-bundler-72867dac.js","./runtime-core.esm-bundler-77b13fca.js","./index-08eda97d.js","./_MapCache-31dad113.js","./isSymbol-1e3d4c76.js","./style-ac750348.js","./index-9f7efeb4.js","./index-2e34e30b.js","./index-62715ce7.js","./index-4f6840b9.js","./icon-b1cf815e.js"],import.meta.url)));o();const ce=c(),ue=_((()=>e((()=>import("./HomeSearchList-c9e14bd6.js")),["./HomeSearchList-c9e14bd6.js","./preload-helper-706a0e5c.js","./index-98e2e8c6.js","./axios-a986ab8c.js","./baseRequest-a74f719c.js","./local-82fd2aea.js","./index-ea316b3a.js","./reactivity.esm-bundler-72867dac.js","./runtime-core.esm-bundler-77b13fca.js","./version-62e2ec50.js","./dayjs.min-39fed9c4.js","./_commonjsHelpers-e5557959.js","./el-dialog-9345927c.js","./runtime-dom.esm-bundler-8f945973.js","./index-f72b3ea9.js","./index-08eda97d.js","./_MapCache-31dad113.js","./isSymbol-1e3d4c76.js","./style-ac750348.js","./icon-b1cf815e.js","./index-4f6840b9.js","./index-11ecaac6.js","./focus-trap-a7ebc7ce.js","./aria-60e0cdc6.js","./index-e1484003.js","./index-9f7efeb4.js","./error-c58402b8.js","./scroll-f7c38f71.js","./el-dialog-f4eb42cc.css","./globStorageState-d3feed6a.js","./_plugin-vue_export-helper-1b428a4d.js","./index-b42e10cf.js","./index-62715ce7.js","./index-2e34e30b.js","./isEqual-13dbd678.js","./_baseIsEqual-f45591d3.js","./_baseClone-93129bef.js","./hasIn-68e1becf.js","./flatten-86d5e527.js","./_baseFlatten-db7d3a92.js","./_overRest-675ccd63.js","./identity-4a5ba4c0.js","./index-e52000c7.js","./index-854ce82e.js","./typescript-5028724d.js","./index-de1201fd.js","./HomeSearchList-b107deb9.css","./base-3111e043.css","./el-input-0e5cd2ac.css","./el-overlay-f6b2674f.css","./el-checkbox-aec27a4a.css","./el-checkbox-group-987ef89c.css"],import.meta.url)));let me=k.CancelToken;const pe=B({value:"",engienVisible:!1,showKeyWord:!1,keyList:[],value:"",keyIndex:-1,searchVisible:!1,isReqBaiduSgPer:!0});function de(s){if(t.set("isAuthBaidu",s),"0"===s)return pe.isReqBaiduSgPer=!1,void e((()=>import("./index-da9a90a7.js")),["./index-da9a90a7.js","./runtime-dom.esm-bundler-8f945973.js","./runtime-core.esm-bundler-77b13fca.js","./reactivity.esm-bundler-72867dac.js","./config-provider-6b9f90d0.js","./index-f72b3ea9.js","./index-08eda97d.js","./_MapCache-31dad113.js","./isSymbol-1e3d4c76.js","./style-ac750348.js","./index-62715ce7.js","./index-854ce82e.js","./typescript-5028724d.js","./icon-b1cf815e.js","./index-4f6840b9.js","./aria-60e0cdc6.js","./index-e1484003.js"],import.meta.url).then((e=>{e.default.warning("如果想开启搜索建议, 在空白处右键-设置-搜索栏-开启搜索建议 即可")}));chrome&&chrome.permissions.request({origins:["https://www.baidu.com/"]},(e=>{e&&(pe.isReqBaiduSgPer=!1,console.log("获取baidu权限成功"))}))}u()||"safari"==m()||"firefox"==m()||p?pe.isReqBaiduSgPer=!1:chrome&&chrome.permissions.contains({origins:["https://www.baidu.com/"]},(e=>{pe.isReqBaiduSgPer=!e,e&&t.set("isAuthBaidu","1"),"0"===t.get("isAuthBaidu")&&(pe.isReqBaiduSgPer=!1)}));const he=f((()=>ce.value.search.history&&!pe.value));let je=D(t.get("searchHistory")||[]);e((()=>import("./indexdb-76ab5eed.js")),["./indexdb-76ab5eed.js","./localforage-5beca937.js","./_commonjsHelpers-e5557959.js","./_commonjs-dynamic-modules-3e972b61.js","./dayjs.min-39fed9c4.js"],import.meta.url).then((e=>{e.default.get("searchHistory").then((e=>{je.value=e||je.value}))}));const ke=f((()=>pe.value?pe.keyList||[]:ce.value.search.history?je.value:[]));const ye=f((()=>{let e=ke.value.length;return pe.value&&e++,30*e+"px"}));function _e(e){r(".se-input-box").contains(e.target)||(pe.showKeyWord=!1,pe.engienVisible=!1)}g((()=>{a(r("#searchInput"),"input",ge),a(r("#searchInput"),"keydown",ve),a(r("#searchInput"),"click",(()=>{pe.showKeyWord=!0,pe.engienVisible=!1})),a(r("#selectEngine"),"click",(e=>{pe.engienVisible=!pe.engienVisible})),a(document,"click",_e)})),v((()=>pe.showKeyWord),(e=>{e&&d("i",{gscmd:"impress",gid:"gad_545_isw11x5k",ck:1113,adk:11029})})),w((()=>{n(r("#searchInput"),"input",ge),n(r("#searchInput"),"keydown",ve),n(document,"click",_e)}));let fe=null;function ge(e){if(pe.value=e.target.value,pe.value){if(pe.showKeyWord=!0,pe.keyIndex=-1,u()||"safari"==m()||"firefox"==m()||p){const e=me.source();return fe&&(fe.cancel("取消请求"),fe=null),fe=e,void k.get(`https://api.codelife.cc/api/baidu_sugrec/${pe.value}`,{cancelToken:e.token}).then((e=>{let s=e.data;pe.keyList=(s.g||[]).map((e=>e.q))}))}{fe&&(fe.abort(),fe=null);const e=new AbortController,{signal:s}=e;fe=e;let i=t.get("isAuthBaidu");if(!i||"0"===i)return;fetch(`https://www.baidu.com/sugrec?&prod=pc&wd=${pe.value}`,{signal:s}).then((e=>e.json())).then((e=>{let s=e.g||[];s=s.map((e=>e.q)),pe.keyList=s,fe=null}))}}else pe.keyList=[]}function ve(e){let s=e.code;["ArrowDown","ArrowUp"].includes(s)?we(e):"Tab"===s&&function(e){e.preventDefault();let s=ce.value.useSearch||"baidu",i=ce.value.searchEngine.findIndex((e=>e.key==s)),t=(ce.value.searchEngine||[]).length;i+=1,i>=t&&(i=0);let o=ce.value.searchEngine[i];ce.value.useSearch=o.key,q("selectSearch",o)}(e)}function we(e){let s=e.code;"ArrowDown"===s?(pe.keyIndex++,pe.keyIndex>=11&&(pe.keyIndex=0)):"ArrowUp"===s&&(e.preventDefault(),pe.keyIndex--,pe.keyIndex<=0&&(pe.keyIndex=10)),pe.keyIndex>0&&q("selectSug",pe.keyList[pe.keyIndex-1])}function be(s,i,t){if(t&&229==t.keyCode)return;!async function(s){if(s){je.value.unshift(s),je.value=[...new Set(je.value)],je.value=je.value.splice(0,10);let i=await e((()=>import("./indexdb-76ab5eed.js")),["./indexdb-76ab5eed.js","./localforage-5beca937.js","./_commonjsHelpers-e5557959.js","./_commonjs-dynamic-modules-3e972b61.js","./dayjs.min-39fed9c4.js"],import.meta.url);i=i.default,i.set("searchHistory",je._rawValue)}}(s),s=encodeURIComponent(s);let o=`${W.currSearch.href}${s} `,a=W.currSearch.key;if("douyin"==a&&(o+="?ug_source=iTab_ssrk"),0===pe.keyIndex||"fanyi"==i){let e=ce.value.search.translate||"https://translate.volcengine.com/translate";e.includes("//translate.volcengine.com")?(d("c",{gid:"gad_545_isw11x5k",ck:1113,adk:11029}),o=`https://translate.volcengine.com/translate?text=${s}&from=itab`):o=`${e}${s}`,a=`翻译-${e}`}h({t:"event",ec:a,ea:"use",el:"search"}),j({name:a}),pe.showKeyWord=!1;let r=ce.value.open&&ce.value.open.searchBlank?"_blank":"_self";document.body.clientWidth<600&&o.includes("www.baidu.com")&&(o=o.replace("www","m")),window.open(o,r),setTimeout((()=>{q("selectSug",""),pe.keyList=[],pe.value=""}),500)}return L({searchHandle:be}),(t,o)=>(b(),x(E,null,[I("div",z,[I("ul",{class:O(["se-all",{action:pe.engienVisible}])},[(b(!0),x(E,null,S(H(ce).searchEngine,((e,i)=>(b(),x("li",{onClick:s((s=>{return q("selectSearch",i=e),pe.engienVisible=!1,void(ce.value.useSearch=i.key);var i}),["stop"]),class:"se-item",key:e.key,title:e.title},[0!==i?(b(),x("i",{key:0,title:"删除",onClick:s((e=>function(e){ce.value.searchEngine.splice(e,1)}(i)),["stop"]),class:"f12 d-icon se-item-del"},[V(H(oe))],8,F)):A("",!0),I("span",{class:O(["se-item-icon",{action:e.key==y.currSearch.key}])},[I("img",{class:"search-icon",src:`https://files.codelife.cc/itab/search/${e.key}.svg`},null,8,G)],2),I("p",M,$(e.title),1)],8,U)))),128)),I("li",{key:"add",onClick:o[0]||(o[0]=s((e=>pe.searchVisible=!0),["stop"])),class:"se-item",title:"添加"},[I("span",J,[I("i",N,[V(H(ae))])]),Q])],2),pe.showKeyWord?(b(),x("ul",{key:0,class:O(["se-keyword al",{isReqBaidu:pe.isReqBaiduSgPer}]),style:K([{height:H(ye)}])},[pe.isReqBaiduSgPer?(b(),x("div",X,[R(" 开启联想词搜索建议 "),Y,I("p",null,[V(H(le),{size:"small",onClick:o[1]||(o[1]=e=>de("0"))},{default:C((()=>[R("取消")])),_:1}),V(H(le),{size:"small",type:"primary",onClick:o[2]||(o[2]=e=>de("1"))},{default:C((()=>[R("授权")])),_:1})])])):A("",!0),I("li",{onClick:o[3]||(o[3]=s((e=>be(pe.value||H(ke)[0],"fanyi")),["stop"])),class:O(["se-keyword-item d-elip item-fanyi",{focus:0===pe.keyIndex}]),onKeydown:we},[I("i",Z,[V(H(ne))]),I("span",null,$(pe.value||H(ke)[0]),1)],34),(b(!0),x(E,null,S(H(ke),((t,o)=>(b(),x("li",{onClick:s((e=>be(t)),["stop"]),class:O(["se-keyword-item d-elip d-flex-y",{focus:pe.keyIndex==o+1}]),key:t,"data-index":o+1},[I("i",se,[T(V(H(re),null,null,512),[[i,!pe.value]]),T(V(H(l),null,null,512),[[i,pe.value]])]),I("span",ie,$(t),1),H(he)?(b(),x("i",{key:0,onClick:s((s=>async function(s){je.value.splice(s,1),je.value=je.value;let i=await e((()=>import("./indexdb-76ab5eed.js")),["./indexdb-76ab5eed.js","./localforage-5beca937.js","./_commonjsHelpers-e5557959.js","./_commonjs-dynamic-modules-3e972b61.js","./dayjs.min-39fed9c4.js"],import.meta.url);i=i.default,i.set("searchHistory",je._rawValue)}(o)),["stop"]),class:"se-history-del d-icon f16",size:16},[V(H(oe))],8,te)):A("",!0)],10,ee)))),128))],6)):A("",!0)]),pe.searchVisible?(b(),P(H(ue),{key:0,modelValue:pe.searchVisible,"onUpdate:modelValue":o[4]||(o[4]=e=>pe.searchVisible=e)},null,8,["modelValue"])):A("",!0)],64))}}),[["__scopeId","data-v-ca352a74"]]);export{ae as default};

import{b as e,u as l}from"./index-854ce82e.js";import{b as a,d as t}from"./runtime-dom.esm-bundler-8f945973.js";import{b as r,_ as s,d as o,w as n}from"./index-f72b3ea9.js";import{u as i}from"./index-08eda97d.js";import{t as u}from"./error-c58402b8.js";import{q as c,y as v,c as m,a9 as f,o as p,h as d,l as h,g as y,b as g,a as b,f as w,F as S,w as z,v as x,ag as _,t as k,D as E,x as L,r as T,e as j}from"./runtime-core.esm-bundler-77b13fca.js";import{r as H,a9 as B,a as R,u as C,n as N,b as $,g as A}from"./reactivity.esm-bundler-72867dac.js";import{b as M,c as W,a as X}from"./style-ac750348.js";const Y=Symbol("scrollbarContextKey"),q={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},K=r({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean});var O=s(c({__name:"thumb",props:K,setup(l){const r=l,s=v(Y),o=i("scrollbar");s||u("Thumb","can not inject scrollbar context");const n=H(),c=H(),b=H({}),w=H(!1);let S=!1,z=!1,x=M?document.onselectstart:null;const _=m((()=>q[r.vertical?"vertical":"horizontal"])),k=m((()=>(({move:e,size:l,bar:a})=>({[a.size]:l,transform:`translate${a.axis}(${e}%)`}))({size:r.size,move:r.move,bar:_.value}))),E=m((()=>n.value[_.value.offset]**2/s.wrapElement[_.value.scrollSize]/r.ratio/c.value[_.value.offset])),L=e=>{var l;if(e.stopPropagation(),e.ctrlKey||[1,2].includes(e.button))return;null==(l=window.getSelection())||l.removeAllRanges(),j(e);const a=e.currentTarget;a&&(b.value[_.value.axis]=a[_.value.offset]-(e[_.value.client]-a.getBoundingClientRect()[_.value.direction]))},T=e=>{if(!c.value||!n.value||!s.wrapElement)return;const l=100*(Math.abs(e.target.getBoundingClientRect()[_.value.direction]-e[_.value.client])-c.value[_.value.offset]/2)*E.value/n.value[_.value.offset];s.wrapElement[_.value.scroll]=l*s.wrapElement[_.value.scrollSize]/100},j=e=>{e.stopImmediatePropagation(),S=!0,document.addEventListener("mousemove",$),document.addEventListener("mouseup",A),x=document.onselectstart,document.onselectstart=()=>!1},$=e=>{if(!n.value||!c.value)return;if(!1===S)return;const l=b.value[_.value.axis];if(!l)return;const a=100*(-1*(n.value.getBoundingClientRect()[_.value.direction]-e[_.value.client])-(c.value[_.value.offset]-l))*E.value/n.value[_.value.offset];s.wrapElement[_.value.scroll]=a*s.wrapElement[_.value.scrollSize]/100},A=()=>{S=!1,b.value[_.value.axis]=0,document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",A),W(),z&&(w.value=!1)};f((()=>{W(),document.removeEventListener("mouseup",A)}));const W=()=>{document.onselectstart!==x&&(document.onselectstart=x)};return e(B(s,"scrollbarElement"),"mousemove",(()=>{z=!1,w.value=!!r.size})),e(B(s,"scrollbarElement"),"mouseleave",(()=>{z=!0,w.value=S})),(e,l)=>(p(),d(t,{name:C(o).b("fade"),persisted:""},{default:h((()=>[y(g("div",{ref_key:"instance",ref:n,class:R([C(o).e("bar"),C(o).is(C(_).key)]),onMousedown:T},[g("div",{ref_key:"thumb",ref:c,class:R(C(o).e("thumb")),style:N(C(k)),onMousedown:L},null,38)],34),[[a,e.always||w.value]])])),_:1},8,["name"]))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);var P=s(c({__name:"bar",props:r({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),setup(e,{expose:l}){const a=e,t=H(0),r=H(0);return l({handleScroll:e=>{if(e){const l=e.offsetHeight-4,s=e.offsetWidth-4;r.value=100*e.scrollTop/l*a.ratioY,t.value=100*e.scrollLeft/s*a.ratioX}}}),(e,l)=>(p(),b(S,null,[w(O,{move:t.value,ratio:e.ratioX,size:e.width,always:e.always},null,8,["move","ratio","size","always"]),w(O,{move:r.value,ratio:e.ratioY,size:e.height,vertical:"",always:e.always},null,8,["move","ratio","size","always"])],64))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const D=r({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:o([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),F={scroll:({scrollTop:e,scrollLeft:l})=>[e,l].every(W)},I=c({name:"ElScrollbar"});const G=n(s(c({...I,props:D,emits:F,setup(a,{expose:t,emit:r}){const s=a,o=i("scrollbar");let n,u;const c=H(),v=H(),f=H(),y=H("0"),w=H("0"),S=H(),B=H(1),M=H(1),q=m((()=>{const e={};return s.height&&(e.height=X(s.height)),s.maxHeight&&(e.maxHeight=X(s.maxHeight)),[s.wrapStyle,e]})),K=m((()=>[s.wrapClass,o.e("wrap"),{[o.em("wrap","hidden-default")]:!s.native}])),O=m((()=>[o.e("view"),s.viewClass])),D=()=>{var e;v.value&&(null==(e=S.value)||e.handleScroll(v.value),r("scroll",{scrollTop:v.value.scrollTop,scrollLeft:v.value.scrollLeft}))};const F=()=>{if(!v.value)return;const e=v.value.offsetHeight-4,l=v.value.offsetWidth-4,a=e**2/v.value.scrollHeight,t=l**2/v.value.scrollWidth,r=Math.max(a,s.minSize),o=Math.max(t,s.minSize);B.value=a/(e-a)/(r/(e-r)),M.value=t/(l-t)/(o/(l-o)),w.value=r+4<e?`${r}px`:"",y.value=o+4<l?`${o}px`:""};return z((()=>s.noresize),(a=>{a?(null==n||n(),null==u||u()):(({stop:n}=l(f,F)),u=e("resize",F))}),{immediate:!0}),z((()=>[s.maxHeight,s.height]),(()=>{s.native||x((()=>{var e;F(),v.value&&(null==(e=S.value)||e.handleScroll(v.value))}))})),_(Y,$({scrollbarElement:c,wrapElement:v})),k((()=>{s.native||x((()=>{F()}))})),E((()=>F())),t({wrapRef:v,update:F,scrollTo:function(e,l){A(e)?v.value.scrollTo(e):W(e)&&W(l)&&v.value.scrollTo(e,l)},setScrollTop:e=>{W(e)&&(v.value.scrollTop=e)},setScrollLeft:e=>{W(e)&&(v.value.scrollLeft=e)},handleScroll:D}),(e,l)=>(p(),b("div",{ref_key:"scrollbarRef",ref:c,class:R(C(o).b())},[g("div",{ref_key:"wrapRef",ref:v,class:R(C(K)),style:N(C(q)),onScroll:D},[(p(),d(T(e.tag),{ref_key:"resizeRef",ref:f,class:R(C(O)),style:N(e.viewStyle)},{default:h((()=>[L(e.$slots,"default")])),_:3},8,["class","style"]))],38),e.native?j("v-if",!0):(p(),d(P,{key:0,ref_key:"barRef",ref:S,height:w.value,width:y.value,always:e.always,"ratio-x":M.value,"ratio-y":B.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]));export{G as E};

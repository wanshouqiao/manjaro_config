import{_ as t}from"./preload-helper-706a0e5c.js";import{d as e}from"./dayjs.min-39fed9c4.js";import{c as i}from"./_commonjsHelpers-e5557959.js";var a,r={exports:{}};const n=r.exports=(a="day",function(t,e,i){var r=function(t){return t.add(4-t.isoWeekday(),a)},n=e.prototype;n.isoWeekYear=function(){return r(this).year()},n.isoWeek=function(t){if(!this.$utils().u(t))return this.add(7*(t-this.isoWeek()),a);var e,n,s,o=r(this),f=(e=this.isoWeekYear(),s=4-(n=(this.$u?i.utc:i)().year(e).startOf("year")).isoWeekday(),n.isoWeekday()>4&&(s+=7),n.add(s,a));return o.diff(f,"week")+1},n.isoWeekday=function(t){return this.$utils().u(t)?this.day()||7:this.day(this.day()%7?t:t-7)};var s=n.startOf;n.startOf=function(t,e){var i=this.$utils(),a=!!i.u(e)||e;return"isoweek"===i.p(t)?a?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):s.bind(this)(t,e)}});e.extend(n);const s={month:["正月","二月","三月","四月","五月","六月","七月","八月","九月","十月","冬月","腊月"],day:["初一","初二","初三","初四","初五","初六","初七","初八","初九","初十","十一","十二","十三","十四","十五","十六","十七","十八","十九","二十","廿一","廿二","廿三","廿四","廿五","廿六","廿七","廿八","廿九","三十"]};async function o(e){let{Lunar:i}=await t((()=>import("./index-ec281b36.js").then((t=>t.i))),["./index-ec281b36.js","./_commonjsHelpers-e5557959.js"],import.meta.url),a=Number(e.slice(0,4)),r=e.slice(4,6);r=s.month.findIndex((t=>t==r))+1;let n=e.slice(6,8);return n=s.day.findIndex((t=>t==n))+1,n=await async function(e,i,a){let{LunarMonth:r}=await t((()=>import("./index-ec281b36.js").then((t=>t.i))),["./index-ec281b36.js","./_commonjsHelpers-e5557959.js"],import.meta.url);var n=r.fromYm(e,i);return n.getDayCount()>a?a:n.getDayCount()}(a,r,n),i.fromYmd(a,r,n).getSolar().toString()}async function f(e=new Date,i){let{Lunar:a}=await t((()=>import("./index-ec281b36.js").then((t=>t.i))),["./index-ec281b36.js","./_commonjsHelpers-e5557959.js"],import.meta.url);var r=a.fromDate(e);return"y"===i?r.getYear():"d"===i?r.getDayInChinese():r.toString()}const d=async(i,a,r=!1)=>{if(!a)return r&&(i=await o(i)),Math.ceil(e(i).diff(e(),"days",!0));if("year"==a){if(r){let t=await f();if(t=t.slice(5,9),t==i.slice(4,8))return" 0";let a=await f(new Date,"y"),r=`${a}${i.slice(4,8)}`,n=await o(r);e().isAfter(e(n))&&a++,i=`${a}${i.slice(4,8)}`;let s=await o(i);return Math.ceil(e(s).diff(e(),"days",!0))}let t=e().format("YYYY"),a=e(i).format("MMDD");if(e().format("MMDD")==a)return"0";e().isAfter(e(`${t}-${a}`))&&t++;let n=e(`${t}-${a}`);return Math.ceil(e(n).diff(e(),"days",!0))}if("month"==a){let t=e().format("YYYY"),a=e().format("MM");if(r){let t=await f(new Date,"y"),a=await f(),r=a.slice(5,7),n=a.slice(7,9),d=i.slice(6,8);if(n===d)return" 0";let l=`${t}${r}${d}`,u=await o(l);if(e().isAfter(e(u))){let e=s.month.findIndex((t=>t===r));r=s.month[e+1],r||(r="正月",t++),l=`${t}${r}${d}`,u=await o(l)}return Math.ceil(e(u).diff(e(),"days",!0))}let n=i.toString().length>2?e(i).format("DD"):i;if(e().format("DD")==n)return"0";e().isAfter(e(`${t}-${a}-${n}`))&&a++;let d=e(`${t}-${a}-${n}`);return Math.ceil(e(d).diff(e(),"days",!0))}if("week"==a){let t=e().isoWeekday();r&&(i=await o(i));let a=e(i).isoWeekday()-t;return a>0?a:a+7}if("festival"==a){let i=null,{Solar:a,Lunar:r}=await t((()=>import("./index-ec281b36.js").then((t=>t.i))),["./index-ec281b36.js","./_commonjsHelpers-e5557959.js"],import.meta.url),n=(new Date).getTime();for(;!i;){let t=a.fromDate(new Date(n)),s=[...r.fromDate(new Date(n)).getFestivals(),...t.getFestivals()];s.length?i={number:Math.ceil(e(n).diff(e(),"days",!0)),target:e(n).format("YYYY-MM-DD"),title:s.join(",")}:n+=864e5}return i}return""},l=(t,i=["1","2","3","4","5"])=>{"string"==typeof t&&(t=["2022-09-01 00:00:00",t]);let a=e().format("YYYY-MM-DD"),r=e(`${a} ${e(t[0]).format("HH:mm:ss")}`),n=e(`${a} ${e(t[1]).format("HH:mm:ss")}`);if(!(-1!=i.findIndex((t=>t==e().day())))||e().isBefore(r)||e().isAfter(n))return"休息时间";let s=n.diff(e(),"h"),o=Math.floor(n.diff(e(),"m")%60),f=Math.floor(n.diff(e(),"s")%60);return s<10&&(s="0"+s),o<10&&(o="0"+o),f<10&&(f="0"+f),`${s}:${o}:${f}`};export{d as a,l as c};

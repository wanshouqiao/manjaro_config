import{b as e,d as s,a as t,r as o}from"./runtime-dom.esm-bundler-8f945973.js";import{m as n}from"./config-provider-6b9f90d0.js";import{b as a,u as r}from"./index-854ce82e.js";import{b as l,_ as u,w as i,d as p,E as d,e as m}from"./index-f72b3ea9.js";import{u as c}from"./index-08eda97d.js";import{q as f,c as g,o as y,a as v,x,f as b,l as h,g as C,b as j,t as k,w as T,h as _,e as N,r as w,F as S,a4 as B}from"./runtime-core.esm-bundler-77b13fca.js";import{c as M,b as $,u as z,l as I}from"./style-ac750348.js";import{a as L,u as E,t as H,Y as D,r as U,n as q,d as A,c as F}from"./reactivity.esm-bundler-72867dac.js";import{m as O}from"./typescript-5028724d.js";import{i as R,T as K,a as Y}from"./icon-b1cf815e.js";import{E as Z}from"./aria-60e0cdc6.js";import{u as G}from"./index-e1484003.js";import"./index-62715ce7.js";import"./_MapCache-31dad113.js";import"./isSymbol-1e3d4c76.js";import"./index-4f6840b9.js";const J=l({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),P=["textContent"],Q=f({name:"ElBadge"});const V=i(u(f({...Q,props:J,setup(t,{expose:o}){const n=t,a=c("badge"),r=g((()=>n.isDot?"":M(n.value)&&M(n.max)&&n.max<n.value?`${n.max}+`:`${n.value}`));return o({content:r}),(t,o)=>(y(),v("div",{class:L(E(a).b())},[x(t.$slots,"default"),b(s,{name:`${E(a).namespace.value}-zoom-in-center`,persisted:""},{default:h((()=>[C(j("sup",{class:L([E(a).e("content"),E(a).em("content",t.type),E(a).is("fixed",!!t.$slots.default),E(a).is("dot",t.isDot)]),textContent:H(E(r))},null,10,P),[[e,!t.hidden&&(E(r)||t.isDot)]])])),_:1},8,["name"])],2))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]])),W=["success","info","warning","error"],X=O({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:$?document.body:void 0}),ee=l({customClass:{type:String,default:X.customClass},center:{type:Boolean,default:X.center},dangerouslyUseHTMLString:{type:Boolean,default:X.dangerouslyUseHTMLString},duration:{type:Number,default:X.duration},icon:{type:R,default:X.icon},id:{type:String,default:X.id},message:{type:p([String,Object,Function]),default:X.message},onClose:{type:p(Function),required:!1},showClose:{type:Boolean,default:X.showClose},type:{type:String,values:W,default:X.type},offset:{type:Number,default:X.offset},zIndex:{type:Number,default:X.zIndex},grouping:{type:Boolean,default:X.grouping},repeatNum:{type:Number,default:X.repeatNum}}),se={destroy:()=>!0},te=D([]),oe=e=>{const{prev:s}=(e=>{const s=te.findIndex((s=>s.id===e)),t=te[s];let o;return s>0&&(o=te[s-1]),{current:t,prev:o}})(e);return s?s.vm.exposed.bottom.value:0},ne=["id"],ae=["innerHTML"],re=f({name:"ElMessage"});var le=u(f({...re,props:ee,emits:se,setup(o,{expose:n}){const l=o,{Close:u}=Y,i=c("message"),p=U(),m=U(!1),f=U(0);let B;const M=g((()=>l.type?"error"===l.type?"danger":l.type:"info")),$=g((()=>{const e=l.type;return{[i.bm("icon",e)]:e&&K[e]}})),I=g((()=>l.icon||K[l.type]||"")),D=g((()=>oe(l.id))),A=g((()=>l.offset+D.value)),F=g((()=>f.value+A.value)),O=g((()=>({top:`${A.value}px`,zIndex:l.zIndex})));function R(){0!==l.duration&&({stop:B}=z((()=>{J()}),l.duration))}function G(){null==B||B()}function J(){m.value=!1}return k((()=>{R(),m.value=!0})),T((()=>l.repeatNum),(()=>{G(),R()})),a(document,"keydown",(function({code:e}){e===Z.esc&&J()})),r(p,(()=>{f.value=p.value.getBoundingClientRect().height})),n({visible:m,bottom:F,close:J}),(o,n)=>(y(),_(s,{name:E(i).b("fade"),onBeforeLeave:o.onClose,onAfterLeave:n[0]||(n[0]=e=>o.$emit("destroy")),persisted:""},{default:h((()=>[C(j("div",{id:o.id,ref_key:"messageRef",ref:p,class:L([E(i).b(),{[E(i).m(o.type)]:o.type&&!o.icon},E(i).is("center",o.center),E(i).is("closable",o.showClose),o.customClass]),style:q(E(O)),role:"alert",onMouseenter:G,onMouseleave:R},[o.repeatNum>1?(y(),_(E(V),{key:0,value:o.repeatNum,type:E(M),class:L(E(i).e("badge"))},null,8,["value","type","class"])):N("v-if",!0),E(I)?(y(),_(E(d),{key:1,class:L([E(i).e("icon"),E($)])},{default:h((()=>[(y(),_(w(E(I))))])),_:1},8,["class"])):N("v-if",!0),x(o.$slots,"default",{},(()=>[o.dangerouslyUseHTMLString?(y(),v(S,{key:1},[N(" Caution here, message could've been compromised, never use user's input as message "),j("p",{class:L(E(i).e("content")),innerHTML:o.message},null,10,ae)],2112)):(y(),v("p",{key:0,class:L(E(i).e("content"))},H(o.message),3))])),o.showClose?(y(),_(E(d),{key:2,class:L(E(i).e("closeBtn")),onClick:t(J,["stop"])},{default:h((()=>[b(E(u))])),_:1},8,["class","onClick"])):N("v-if",!0)],46,ne),[[e,m.value]])])),_:3},8,["name","onBeforeLeave"]))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);let ue=1;const ie=e=>{const s=!e||A(e)||B(e)||F(e)?{message:e}:e,t={...X,...s};if(t.appendTo){if(A(t.appendTo)){let e=document.querySelector(t.appendTo);I(e)||(e=document.body),t.appendTo=e}}else t.appendTo=document.body;return t},pe=({appendTo:e,...s},t)=>{const{nextZIndex:n}=G(),a="message_"+ue++,r=s.onClose,l=document.createElement("div"),u={...s,zIndex:n()+s.zIndex,id:a,onClose:()=>{null==r||r(),(e=>{const s=te.indexOf(e);if(-1===s)return;te.splice(s,1);const{handler:t}=e;t.close()})(m)},onDestroy:()=>{o(null,l)}},i=b(le,u,F(u.message)||B(u.message)?{default:F(u.message)?u.message:()=>u.message}:null);i.appContext=t||de._context,o(i,l),e.appendChild(l.firstElementChild);const p=i.component,d={close:()=>{p.exposed.visible.value=!1}},m={id:a,vnode:i,vm:p,handler:d,props:i.component.props};return m},de=(e={},s)=>{if(!$)return{close:()=>{}};if(M(n.max)&&te.length>=n.max)return{close:()=>{}};const t=ie(e);if(t.grouping&&te.length){const e=te.find((({vnode:e})=>{var s;return(null==(s=e.props)?void 0:s.message)===t.message}));if(e)return e.props.repeatNum+=1,e.props.type=t.type,e.handler}const o=pe(t,s);return te.push(o),o.handler};W.forEach((e=>{de[e]=(s={},t)=>{const o=ie(s);return de({...o,type:e},t)}})),de.closeAll=function(e){for(const s of te)e&&e!==s.props.type||s.handler.close()},de._context=null;const me=m(de,"$message");export{me as ElMessage,me as default,X as messageDefaults,se as messageEmits,ee as messageProps,W as messageTypes};

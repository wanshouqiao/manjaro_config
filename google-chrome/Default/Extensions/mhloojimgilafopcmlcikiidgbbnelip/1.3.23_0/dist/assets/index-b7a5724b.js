import{_ as e}from"./d-dialog-563b2957.js";import{w as t,a as o,b as a}from"./runtime-dom.esm-bundler-8f945973.js";import{j as s,a as i,b as l,c as r,g as n}from"./jingtuitui-dbfdf2bd.js";/* empty css             */import{E as p}from"./el-skeleton-item-3488c43b.js";/* empty css                 *//* empty css                  *//* empty css                        *//* empty css                *//* empty css                  */import m from"./wallpaperDb-a72c1bf5.js";import{_ as u}from"./_plugin-vue_export-helper-1b428a4d.js";import{o as d}from"./index-854ce82e.js";import{l as c}from"./index-4f6840b9.js";import{E as g}from"./index-e52000c7.js";import{E as f}from"./index-a8bd21df.js";import{u as v,E as j}from"./index-ece06083.js";import{b as y,d as h,E as b,_ as x,w as _}from"./index-f72b3ea9.js";import{N as k,d as w,g as S,r as $,a as C,u as L,n as I,t as q,h as A,b as E}from"./reactivity.esm-bundler-72867dac.js";import{U as F,I as P,C as B}from"./focus-trap-a7ebc7ce.js";import{u as K}from"./index-de1201fd.js";import{d as V}from"./index-62715ce7.js";import{u as W}from"./index-08eda97d.js";import{t as z}from"./error-c58402b8.js";import{d as D}from"./debounce-c2dba7cb.js";import{q as R,ar as T,c as H,t as N,o as O,h as U,l as M,b as G,f as Q,a as X,F as Z,m as J,x as Y,j as ee,a6 as te,W as oe,v as ae,K as se,aj as ie,g as le,e as re,p as ne,i as pe}from"./runtime-core.esm-bundler-77b13fca.js";import{S as me}from"./Search-20fcb7d0.js";import{a as ue,E as de}from"./index-f8eeafa4.js";import{ElImage as ce}from"./index-ff2d0a55.js";import{ElButton as ge}from"./index-40ae5b07.js";import"./preload-helper-706a0e5c.js";import"./el-dialog-9345927c.js";import"./icon-b1cf815e.js";import"./index-11ecaac6.js";import"./style-ac750348.js";import"./index-e1484003.js";import"./index-9f7efeb4.js";import"./scroll-f7c38f71.js";/* empty css                   */import"./utils-73d66301.js";import"./main-f5b07798.js";import"./d-text-icon-0c972c3a.js";import"./_baseClone-93129bef.js";import"./_MapCache-31dad113.js";import"./local-82fd2aea.js";import"./globStorageState-d3feed6a.js";import"./index-ea316b3a.js";import"./dayjs.min-39fed9c4.js";import"./_commonjsHelpers-e5557959.js";import"./browser-c7a4f02b.js";import"./week-7975c4f4.js";import"./vue.runtime.esm-bundler-07884c49.js";import"./global-3c385e89.js";import"./Plus-9ce421bd.js";import"./Check-63155ac6.js";import"./icon-a5a7f81d.js";import"./icon-fdb117a5.js";import"./d-calendar-9992ce38.js";import"./icon-92d26b08.js";import"./dateTime-73945ad3.js";import"./icon-0ad693e8.js";import"./dateTools-6203f8f7.js";import"./icon-e7ca50f5.js";import"./icon2-d4bc0c65.js";import"./icon3-aa79709d.js";import"./icon-73c56842.js";import"./icon-9c80e3eb.js";import"./icon-c3851054.js";import"./icon-8d5583fa.js";import"./icon-cc372385.js";import"./icon-c1c85589.js";import"./icon-5996535b.js";import"./icon-c531cb5b.js";import"./icon-e1d7edae.js";import"./notes-a9d23bdb.js";import"./icon-2b215e9e.js";import"./icon-eca13f38.js";import"./icon-51af1d1d.js";import"./stocks-0eb3a6ed.js";import"./icon-133d69b9.js";import"./icon-dd45f250.js";import"./icon-d391b03b.js";import"./todo-998e5e96.js";import"./icon-60032c73.js";import"./icon-a65bc46c.js";import"./icon-0ba8aff4.js";import"./icon-6322d102.js";import"./icon-1216e893.js";import"./icon-4fbf9766.js";import"./icon-3f2dfd1c.js";import"./icon-449c1bca.js";import"./icon-7d2de9c9.js";/* empty css                                                 */import"./Close-20719dd3.js";import"./baseRequest-a74f719c.js";import"./axios-a986ab8c.js";import"./version-62e2ec50.js";import"./localforage-5beca937.js";import"./_commonjs-dynamic-modules-3e972b61.js";import"./typescript-5028724d.js";import"./index-2e34e30b.js";import"./aria-60e0cdc6.js";import"./isSymbol-1e3d4c76.js";import"./strings-23817cc8.js";import"./index-6639a375.js";import"./throttle-c9305476.js";import"./position-7d705053.js";const fe=y({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:h(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:h([Function,Array]),default:k},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},label:{type:String},teleported:v.teleported,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1}}),ve={[F]:e=>w(e),[P]:e=>w(e),[B]:e=>w(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,select:e=>S(e)},je=["aria-expanded","aria-owns"],ye={key:0},he=["id","aria-selected","onClick"],be="ElAutocomplete",xe=R({name:be,inheritAttrs:!1});const _e=_(x(R({...xe,props:fe,emits:ve,setup(e,{expose:a,emit:s}){const i=e,l=K(),r=T(),n=V(),p=W("autocomplete"),m=$(),u=$(),v=$(),y=$();let h=!1,x=!1;const _=$([]),k=$(-1),w=$(""),S=$(!1),E=$(!1),R=$(!1),se=H((()=>p.b(String(Math.floor(1e4*Math.random()))))),ie=H((()=>r.style)),le=H((()=>(_.value.length>0||R.value)&&S.value)),re=H((()=>!i.hideLoading&&R.value)),ne=H((()=>m.value?Array.from(m.value.$el.querySelectorAll("input")):[])),pe=async()=>{await ae(),le.value&&(w.value=`${m.value.$el.offsetWidth}px`)},me=()=>{x=!0},ue=()=>{x=!1,k.value=-1},de=D((async e=>{if(E.value)return;const t=e=>{R.value=!1,E.value||(A(e)?(_.value=e,k.value=i.highlightFirstItem?0:-1):z(be,"autocomplete suggestions must be an array"))};if(R.value=!0,A(i.fetchSuggestions))t(i.fetchSuggestions);else{const o=await i.fetchSuggestions(e,t);A(o)&&t(o)}}),i.debounce),ce=e=>{const t=!!e;if(s(P,e),s(F,e),E.value=!1,S.value||(S.value=t),!i.triggerOnFocus&&!e)return E.value=!0,void(_.value=[]);de(e)},ge=e=>{var t;n.value||("INPUT"!==(null==(t=e.target)?void 0:t.tagName)||ne.value.includes(document.activeElement))&&(S.value=!0)},fe=e=>{s(B,e)},ve=e=>{x||(S.value=!0,s("focus",e),i.triggerOnFocus&&!h&&de(String(i.modelValue)))},xe=e=>{x||s("blur",e)},_e=()=>{S.value=!1,s(F,""),s("clear")},ke=async()=>{le.value&&k.value>=0&&k.value<_.value.length?$e(_.value[k.value]):i.selectWhenUnmatched&&(s("select",{value:i.modelValue}),_.value=[],k.value=-1)},we=e=>{le.value&&(e.preventDefault(),e.stopPropagation(),Se())},Se=()=>{S.value=!1},$e=async e=>{s(P,e[i.valueKey]),s(F,e[i.valueKey]),s("select",e),_.value=[],k.value=-1},Ce=e=>{if(!le.value||R.value)return;if(e<0)return void(k.value=-1);e>=_.value.length&&(e=_.value.length-1);const t=u.value.querySelector(`.${p.be("suggestion","wrap")}`),o=t.querySelectorAll(`.${p.be("suggestion","list")} li`)[e],a=t.scrollTop,{offsetTop:s,scrollHeight:i}=o;s+i>a+t.clientHeight&&(t.scrollTop+=i),s<a&&(t.scrollTop-=i),k.value=e,m.value.ref.setAttribute("aria-activedescendant",`${se.value}-item-${k.value}`)};return d(y,(()=>{le.value&&Se()})),N((()=>{m.value.ref.setAttribute("role","textbox"),m.value.ref.setAttribute("aria-autocomplete","list"),m.value.ref.setAttribute("aria-controls","id"),m.value.ref.setAttribute("aria-activedescendant",`${se.value}-item-${k.value}`),h=m.value.ref.hasAttribute("readonly")})),a({highlightedIndex:k,activated:S,loading:R,inputRef:m,popperRef:v,suggestions:_,handleSelect:$e,handleKeyEnter:ke,focus:()=>{var e;null==(e=m.value)||e.focus()},blur:()=>{var e;null==(e=m.value)||e.blur()},close:Se,highlight:Ce}),(e,a)=>(O(),U(L(j),{ref_key:"popperRef",ref:v,visible:L(le),placement:e.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[L(p).e("popper"),e.popperClass],teleported:e.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${L(p).namespace.value}-zoom-in-top`,persistent:"",onBeforeShow:pe,onShow:me,onHide:ue},{content:M((()=>[G("div",{ref_key:"regionRef",ref:u,class:C([L(p).b("suggestion"),L(p).is("loading",L(re))]),style:I({[e.fitInputWidth?"width":"minWidth"]:w.value,outline:"none"}),role:"region"},[Q(L(f),{id:L(se),tag:"ul","wrap-class":L(p).be("suggestion","wrap"),"view-class":L(p).be("suggestion","list"),role:"listbox"},{default:M((()=>[L(re)?(O(),X("li",ye,[Q(L(b),{class:C(L(p).is("loading"))},{default:M((()=>[Q(L(c))])),_:1},8,["class"])])):(O(!0),X(Z,{key:1},J(_.value,((t,o)=>(O(),X("li",{id:`${L(se)}-item-${o}`,key:o,class:C({highlighted:k.value===o}),role:"option","aria-selected":k.value===o,onClick:e=>$e(t)},[Y(e.$slots,"default",{item:t},(()=>[ee(q(t[e.valueKey]),1)]))],10,he)))),128))])),_:3},8,["id","wrap-class","view-class"])],6)])),default:M((()=>[G("div",{ref_key:"listboxRef",ref:y,class:C([L(p).b(),e.$attrs.class]),style:I(L(ie)),role:"combobox","aria-haspopup":"listbox","aria-expanded":L(le),"aria-owns":L(se)},[Q(L(g),te({ref_key:"inputRef",ref:m},L(l),{"model-value":e.modelValue,onInput:ce,onChange:fe,onFocus:ve,onBlur:xe,onClear:_e,onKeydown:[a[0]||(a[0]=t(o((e=>Ce(k.value-1)),["prevent"]),["up"])),a[1]||(a[1]=t(o((e=>Ce(k.value+1)),["prevent"]),["down"])),t(ke,["enter"]),t(Se,["tab"]),t(we,["esc"])],onMousedown:ge}),oe({_:2},[e.$slots.prepend?{name:"prepend",fn:M((()=>[Y(e.$slots,"prepend")]))}:void 0,e.$slots.append?{name:"append",fn:M((()=>[Y(e.$slots,"append")]))}:void 0,e.$slots.prefix?{name:"prefix",fn:M((()=>[Y(e.$slots,"prefix")]))}:void 0,e.$slots.suffix?{name:"suffix",fn:M((()=>[Y(e.$slots,"suffix")]))}:void 0]),1040,["model-value","onKeydown"])],14,je)])),_:3},8,["visible","placement","popper-class","teleported","transition"]))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/autocomplete/src/autocomplete.vue"]])),ke={class:"remai-content hfull"},we={style:{"background-color":"var(--bg-card)"}},Se={class:"ac pt10 d-flex-between remai-search"},$e={class:"remai-search",style:{"margin-top":"4px",height:"16px",overflow:"hidden"}},Ce=["onClick"],Le={class:"pl20 pr20"},Ie={class:"d-layout hfull bt",style:{height:"calc(100% - 60px)","margin-top":"0px"}},qe={class:"d-layout-content mt10 d-auto-y ml10",style:{height:"calc(100% - 60px)"},"infinite-scroll-delay":"500","infinite-scroll-immediate":!1},Ae={key:0,class:"mb10"},Ee={style:{color:"#e74737"}},Fe={style:{color:"#e74737"}},Pe={class:"remai-body d-flex"},Be=["onClick"],Ke={style:{padding:"16px"}},Ve=["title"],We={class:"price"},ze=(e=>(ne("data-v-e51cf4ff"),e=e(),pe(),e))((()=>G("em",{class:"f12",style:{"vertical-align":"-2px"}},"券后￥",-1))),De={class:"f16 b",style:{"vertical-align":"-2px"}},Re={class:"fr couponlink"},Te={class:"ac"},He={name:"appRemai"};const Ne=u({name:"remai",components:{Content:u(Object.assign(He,{setup(e){const o=E({category:"jd_today_top",categoryList:[{name:"热卖",api:"jd_today_top"},{name:"好货",api:"jd_goods"},{name:"9块9",api:"jd_nine"},{name:"排行",api:"jd_subsidy_goods"},{name:"京东拼购",api:"jd_collage"},{name:"京东自营",api:"jd_self"}],hotSearch:[],total_count:0,goodsOptions:[],goodList:[],loading:!1,moreLoading:!1,rowData:{},queryParams:{pageIndex:1,pageSize:24}});function u(){c(1)}const d=async e=>{o.keyword="",1==e?(o.queryParams.pageIndex++,o.moreLoading=!0):(o.loading=!0,o.queryParams.pageIndex=1);let t=`remai_${o.category}_${o.queryParams.eliteId}_${o.queryParams.pageIndex}`,a=await m.get(t);if(a)return o.goodList=1==e?[...o.goodList,...a]:a,o.moreLoading=!1,void(o.loading=!1);i[o.category]({...o.queryParams,v:"v2"}).then((a=>{let s=a.data||a.brand_list||[];m.set(t,s,72e5),o.goodList=1==e?[...o.goodList,...s]:s})).finally((()=>{o.loading=!1,o.moreLoading=!1}))};function c(e){o.keyword?f(e):d(e)}d(),s({v:"v1"}).then((e=>{o.hotSearch=e.hotWords||[]}));const g=(e,t)=>{e||!o.hotWords?r({word:e,v:"v1"}).then((e=>{t((e||[]).map((e=>({value:e.kw}))))})):cd(o.hotWords)};function f(e){1==e?(o.queryParams.pageIndex++,o.moreLoading=!0):(o.loading=!0,o.queryParams.pageIndex--),n({...o.queryParams,keyword:o.keyword,v:"v2"}).then((t=>{let a=t.data||[];o.goodList=1==e?[...o.goodList,...a]:a,o.total_count=t.total_count||0})).finally((()=>{o.loading=!1,o.moreLoading=!1}))}return(e,s)=>{const i=se("el-icon"),r=ie("infinite-scroll");return O(),X("div",ke,[G("div",we,[G("div",Se,[Q(L(_e),{size:"default",style:{width:"100%"},modelValue:o.keyword,"onUpdate:modelValue":s[0]||(s[0]=e=>o.keyword=e),filterable:"",remote:"",onKeyup:t(f,["enter"]),onChange:f,"reserve-keyword":"",placeholder:"粘贴商品标题，先领取再购物","fetch-suggestions":g},null,8,["modelValue","onKeyup"]),G("button",{class:"d-button",onClick:f},[Q(i,{size:16},{default:M((()=>[Q(L(me))])),_:1})])]),G("p",$e,[(O(!0),X(Z,null,J(o.hotSearch,(e=>(O(),X("span",{onClick:t=>{return a=e,o.keyword=a,void f();var a},class:"f12 hot d-sub",key:e},q(e),9,Ce)))),128))]),G("div",Le,[Q(L(de),{onTabClick:d,modelValue:o.category,"onUpdate:modelValue":s[1]||(s[1]=e=>o.category=e)},{default:M((()=>[(O(!0),X(Z,null,J(o.categoryList,(e=>(O(),U(L(ue),{label:e.name,name:e.api,key:e.api},null,8,["label","name"])))),128))])),_:1},8,["modelValue"])])]),G("div",Ie,[le((O(),X("div",qe,[o.keyword?(O(),X("p",Ae,[ee(" 为您找到 "),G("span",Ee,q(o.keyword),1),ee(" 相关的结果 "),G("span",Fe,q(o.total_count),1),ee("个 ")])):re("",!0),G("ul",Pe,[Q(L(p),{loading:o.loading,rows:3,count:1,animated:""},{default:M((()=>[(O(!0),X(Z,null,J(o.goodList,(e=>(O(),X("li",{onClick:t=>function(e){let t={gid:e.goods_link,unionid:1000360070,positionid:3004143482};l(t).then((e=>{window.open(e.link,"_blank")}))}(e),class:"remai-item",key:e.goods_id,target:"_blank"},[Q(L(ce),{fit:"cover",lazy:"",style:{height:"204px"},class:"hfull wfull",src:e.goods_img},null,8,["src"]),G("div",Ke,[G("p",{class:"title",title:e.short_name||e.jd_title},q(e.short_name),9,Ve),G("p",We,[ze,G("em",De,q(e.final_price),1),G("a",Re,"领"+q(e.discount_price)+"元券",1)])])],8,Be)))),128))])),_:1},8,["loading"])]),G("div",Te,[le(Q(L(ge),{onClick:s[2]||(s[2]=e=>c(1)),loading:o.moreLoading,style:{width:"120px"},size:"small"},{default:M((()=>[ee("加载更多")])),_:1},8,["loading"]),[[a,!o.loading]])])])),[[r,u]])])])}}}),[["__scopeId","data-v-e51cf4ff"]]),DDialog:e},setup:(e,t)=>({})},[["render",function(e,t,o,a,s,i){const l=se("content"),r=se("d-dialog");return O(),U(r,{height:"640px",destroyOnClose:!0},{default:M((()=>[Q(l)])),_:1})}]]);export{Ne as default};

import{b as e,d as o}from"./runtime-dom.esm-bundler-8f945973.js";import{b as t,d as s,E as l,_ as a,w as n}from"./index-f72b3ea9.js";import{u as r,b as u,d}from"./index-08eda97d.js";import{c,h as i,i as f,I as p,a1 as m,N as v,a as y,u as b,t as g,n as E,r as h}from"./reactivity.esm-bundler-72867dac.js";import{a4 as C,t as k,L as A,a9 as S,w as T,q as M,f as x,x as L,n as R,y as I,c as w,o as F,a as _,b as D,l as B,h as N,r as $,e as O,v as P,k as Y,at as j,ag as z,g as H,a6 as U,W as X,P as q}from"./runtime-core.esm-bundler-77b13fca.js";import{i as G,C as K}from"./icon-b1cf815e.js";import{u as V}from"./index-11ecaac6.js";import{F as W,U as Z,E as J}from"./focus-trap-a7ebc7ce.js";import{a as Q,b as ee,q as oe,m as te,p as se,o as le,i as ae,u as ne}from"./style-ac750348.js";import{u as re}from"./index-e1484003.js";import{u as ue,a as de}from"./index-9f7efeb4.js";import{t as ce}from"./error-c58402b8.js";import{a as ie}from"./scroll-f7c38f71.js";var fe=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(fe||{});const pe=e=>{const o=i(e)?e:[e],t=[];return o.forEach((e=>{var o;i(e)?t.push(...pe(e)):C(e)&&i(e.children)?t.push(...pe(e.children)):(t.push(e),C(e)&&(null==(o=e.component)?void 0:o.subTree)&&t.push(...pe(e.component.subTree)))})),t},me=Symbol("dialogInjectionKey"),ve=(e,o,t)=>{let s={offsetX:0,offsetY:0};const l=o=>{const t=o.clientX,l=o.clientY,{offsetX:a,offsetY:n}=s,r=e.value.getBoundingClientRect(),u=r.left,d=r.top,c=r.width,i=r.height,f=document.documentElement.clientWidth,p=document.documentElement.clientHeight,m=-u+a,v=-d+n,y=f-u-c+a,b=p-d-i+n,g=o=>{const r=Math.min(Math.max(a+o.clientX-t,m),y),u=Math.min(Math.max(n+o.clientY-l,v),b);s={offsetX:r,offsetY:u},e.value.style.transform=`translate(${Q(r)}, ${Q(u)})`},E=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",E)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",E)},a=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",l)};k((()=>{A((()=>{t.value?o.value&&e.value&&o.value.addEventListener("mousedown",l):a()}))})),S((()=>{a()}))},ye=e=>{f(e)||ce("[useLockscreen]","You need to pass a ref param to this function");const o=r("popup"),t=p((()=>o.bm("parent","hidden")));if(!ee||oe(document.body,t.value))return;let s=0,l=!1,a="0";const n=()=>{setTimeout((()=>{le(document.body,t.value),l&&(document.body.style.width=a)}),200)};T(e,(e=>{if(!e)return void n();l=!oe(document.body,t.value),l&&(a=document.body.style.width),s=ie(o.namespace.value);const r=document.documentElement.clientHeight<document.body.scrollHeight,u=te(document.body,"overflowY");s>0&&(r||"scroll"===u)&&l&&(document.body.style.width=`calc(100% - ${s}px)`),se(document.body,t.value)})),m((()=>n()))},be=e=>{if(!e)return{onClick:v,onMousedown:v,onMouseup:v};let o=!1,t=!1;return{onClick:s=>{o&&t&&e(s),o=t=!1},onMousedown:e=>{o=e.target===e.currentTarget},onMouseup:e=>{t=e.target===e.currentTarget}}};const ge=M({name:"ElOverlay",props:t({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:s([String,Array,Object])},zIndex:{type:s([String,Number])}}),emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:o,emit:t}){const s=r("overlay"),{onClick:l,onMousedown:a,onMouseup:n}=be(e.customMaskEvent?void 0:e=>{t("click",e)});return()=>e.mask?x("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:l,onMousedown:a,onMouseup:n},[L(o,"default")],fe.STYLE|fe.CLASS|fe.PROPS,["onClick","onMouseup","onMousedown"]):R("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[L(o,"default")])}}),Ee=t({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:G},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),he=["aria-label"],Ce=["id"],ke=M({name:"ElDialogContent"});var Ae=a(M({...ke,props:Ee,emits:{close:()=>!0},setup(e){const o=e,{t:t}=V(),{Close:s}=K,{dialogRef:a,headerRef:n,bodyId:r,ns:u,style:d}=I(me),{focusTrapRef:i}=I(W),f=((...e)=>o=>{e.forEach((e=>{c(e)?e(o):e.value=o}))})(i,a),p=w((()=>o.draggable));return ve(a,n,p),(e,o)=>(F(),_("div",{ref:b(f),class:y([b(u).b(),b(u).is("fullscreen",e.fullscreen),b(u).is("draggable",b(p)),b(u).is("align-center",e.alignCenter),{[b(u).m("center")]:e.center},e.customClass]),style:E(b(d)),tabindex:"-1"},[D("header",{ref_key:"headerRef",ref:n,class:y(b(u).e("header"))},[L(e.$slots,"header",{},(()=>[D("span",{role:"heading",class:y(b(u).e("title"))},g(e.title),3)])),e.showClose?(F(),_("button",{key:0,"aria-label":b(t)("el.dialog.close"),class:y(b(u).e("headerbtn")),type:"button",onClick:o[0]||(o[0]=o=>e.$emit("close"))},[x(b(l),{class:y(b(u).e("close"))},{default:B((()=>[(F(),N($(e.closeIcon||b(s))))])),_:1},8,["class"])],10,he)):O("v-if",!0)],2),D("div",{id:b(r),class:y(b(u).e("body"))},[L(e.$slots,"default")],10,Ce),e.$slots.footer?(F(),_("footer",{key:0,class:y(b(u).e("footer"))},[L(e.$slots,"footer")],2)):O("v-if",!0)],6))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const Se=t({...Ee,appendToBody:{type:Boolean,default:!1},beforeClose:{type:s(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),Te={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Z]:e=>ae(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Me=(e,o)=>{const t=Y().emit,{nextZIndex:s}=re();let l="";const a=ue(),n=ue(),r=h(!1),c=h(!1),i=h(!1),f=h(e.zIndex||s());let p,m;const v=u("namespace",d),y=w((()=>{const o={},t=`--${v.value}-dialog`;return e.fullscreen||(e.top&&(o[`${t}-margin-top`]=e.top),e.width&&(o[`${t}-width`]=Q(e.width))),o})),b=w((()=>e.alignCenter?{display:"flex"}:{}));function g(){null==m||m(),null==p||p(),e.openDelay&&e.openDelay>0?({stop:p}=ne((()=>A()),e.openDelay)):A()}function E(){null==p||p(),null==m||m(),e.closeDelay&&e.closeDelay>0?({stop:m}=ne((()=>S()),e.closeDelay)):S()}function C(){e.beforeClose?e.beforeClose((function(e){e||(c.value=!0,r.value=!1)})):E()}function A(){ee&&(r.value=!0)}function S(){r.value=!1}return e.lockScroll&&ye(r),T((()=>e.modelValue),(l=>{l?(c.value=!1,g(),i.value=!0,f.value=e.zIndex?f.value++:s(),P((()=>{t("open"),o.value&&(o.value.scrollTop=0)}))):r.value&&E()})),T((()=>e.fullscreen),(e=>{o.value&&(e?(l=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=l)})),k((()=>{e.modelValue&&(r.value=!0,i.value=!0,g())})),{afterEnter:function(){t("opened")},afterLeave:function(){t("closed"),t(Z,!1),e.destroyOnClose&&(i.value=!1)},beforeLeave:function(){t("close")},handleClose:C,onModalClick:function(){e.closeOnClickModal&&C()},close:E,doClose:S,onOpenAutoFocus:function(){t("openAutoFocus")},onCloseAutoFocus:function(){t("closeAutoFocus")},onCloseRequested:function(){e.closeOnPressEscape&&C()},onFocusoutPrevented:function(e){var o;"pointer"===(null==(o=e.detail)?void 0:o.focusReason)&&e.preventDefault()},titleId:a,bodyId:n,closed:c,style:y,overlayDialogStyle:b,rendered:i,visible:r,zIndex:f}},xe=["aria-label","aria-labelledby","aria-describedby"],Le=M({name:"ElDialog",inheritAttrs:!1});const Re=n(a(M({...Le,props:Se,emits:Te,setup(t,{expose:s}){const l=t,a=j();de({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},w((()=>!!a.title))),de({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},w((()=>!!l.customClass)));const n=r("dialog"),u=h(),d=h(),c=h(),{visible:i,titleId:f,bodyId:p,style:m,overlayDialogStyle:v,rendered:g,zIndex:C,afterEnter:k,afterLeave:A,beforeLeave:S,handleClose:T,onModalClick:M,onOpenAutoFocus:R,onCloseAutoFocus:I,onCloseRequested:_,onFocusoutPrevented:$}=Me(l,u);z(me,{dialogRef:u,headerRef:d,bodyId:p,ns:n,rendered:g,style:m});const P=be(M),Y=w((()=>l.draggable&&!l.fullscreen));return s({visible:i,dialogContentRef:c}),(t,s)=>(F(),N(q,{to:"body",disabled:!t.appendToBody},[x(o,{name:"dialog-fade",onAfterEnter:b(k),onAfterLeave:b(A),onBeforeLeave:b(S),persisted:""},{default:B((()=>[H(x(b(ge),{"custom-mask-event":"",mask:t.modal,"overlay-class":t.modalClass,"z-index":b(C)},{default:B((()=>[D("div",{role:"dialog","aria-modal":"true","aria-label":t.title||void 0,"aria-labelledby":t.title?void 0:b(f),"aria-describedby":b(p),class:y(`${b(n).namespace.value}-overlay-dialog`),style:E(b(v)),onClick:s[0]||(s[0]=(...e)=>b(P).onClick&&b(P).onClick(...e)),onMousedown:s[1]||(s[1]=(...e)=>b(P).onMousedown&&b(P).onMousedown(...e)),onMouseup:s[2]||(s[2]=(...e)=>b(P).onMouseup&&b(P).onMouseup(...e))},[x(b(J),{loop:"",trapped:b(i),"focus-start-el":"container",onFocusAfterTrapped:b(R),onFocusAfterReleased:b(I),onFocusoutPrevented:b($),onReleaseRequested:b(_)},{default:B((()=>[b(g)?(F(),N(Ae,U({key:0,ref_key:"dialogContentRef",ref:c},t.$attrs,{"custom-class":t.customClass,center:t.center,"align-center":t.alignCenter,"close-icon":t.closeIcon,draggable:b(Y),fullscreen:t.fullscreen,"show-close":t.showClose,title:t.title,onClose:b(T)}),X({header:B((()=>[t.$slots.title?L(t.$slots,"title",{key:1}):L(t.$slots,"header",{key:0,close:b(T),titleId:b(f),titleClass:b(n).e("title")})])),default:B((()=>[L(t.$slots,"default")])),_:2},[t.$slots.footer?{name:"footer",fn:B((()=>[L(t.$slots,"footer")]))}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):O("v-if",!0)])),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,xe)])),_:3},8,["mask","overlay-class","z-index"]),[[e,b(i)]])])),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]));export{Re as E,ge as a,ye as b,be as c,Se as d,Te as e,Me as f,pe as g,ve as u};
